<div
  class="form-field relative"
  [ngClass]="class()"
  [class.inline-editable]="inlineEditable"
  [class.fixed-height]="fixedHeight"
  [class.has-error]="hasError()"
  [class.has-hint]="showHint()"
  [style.height]="fixedHeight ? minHeight : 'auto'"
>
  <!-- Label -->
  @if (label) {
  <span class="text-sm font-medium mb-2 block">
    <ng-content select="app-label"></ng-content>
    @if (isRequired() && !hideRequiredMarker) {
    <span class="text-red-500 ml-1" aria-label="Required">*</span>
    }
  </span>
  }

  <!-- Input Container -->
  <div class="input-container w-full">
    <p-input-group>
      <ng-content></ng-content>
      @if (inlineEditable) { @if (!isEditing()) {
      <p-inputgroup-addon>
        <p-button
          text
          icon="pi pi-pencil"
          [pTooltip]="'common.edit' | translate"
          (click)="onEditClick()"
        />
      </p-inputgroup-addon>
      } @else {
      <p-inputgroup-addon>
        <p-button
          text
          icon="pi pi-times"
          severity="secondary"
          [pTooltip]="'common.cancel' | translate"
          (click)="onCancelClick()"
        />
      </p-inputgroup-addon>
      <p-inputgroup-addon>
        <p-button
          text
          icon="pi pi-save"
          [pTooltip]="'common.save' | translate"
          (click)="onSaveClick()"
        />
      </p-inputgroup-addon>
      } }
    </p-input-group>
  </div>

  <!-- Message Container with Fixed Height -->
  <div class="message-container" *ngIf="fixedHeight">
    <!-- Helper Text (shows when no error and conditions are met) -->
    @if (showHint() && !showError()) {
    <div class="hint-text">
      <ng-content select="app-hint"></ng-content>
    </div>
    }

    <!-- Error Message (shows when there's an error and app-control-error is present) -->
    @if (showError()) {
    <div class="error-text" role="alert" [attr.aria-live]="'polite'">
      <ng-content select="app-control-error"></ng-content>
    </div>
    }
  </div>

  <!-- Messages without Fixed Height -->
  @if (!fixedHeight) {
  <!-- Helper Text -->
  @if (showHint() && !showError()) {
  <div class="hint-text mt-1">
    <ng-content select="app-hint"></ng-content>
  </div>
  }

  <!-- Error Message -->
  @if (showError()) {
  <div class="error-text mt-1" role="alert" [attr.aria-live]="'polite'">
    <ng-content select="app-control-error"></ng-content>
  </div>
  } }
</div>
